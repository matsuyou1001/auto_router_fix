# auto_router_fix

インターネット接続が行えなくなったとき、自動で状態を確認し、必要に応じてバッファロー製の無線LANルーター（および中継器）を再起動します。  
簡単な疎通テストを行い、一定時間以上オフラインが続いた場合に再起動を試みます。

## 特徴

- `ping` による疎通確認
- オフライン状態が一定時間（例：30分）継続した場合のみ再起動を実行
- 再起動の試行回数も制限可能
- バッファロー製ルーターの簡易なWeb管理画面に対応（独自仕様）

## 使用方法

1. リポジトリをクローンします。
2. `config.sh.sample` をコピーして `config.sh` を作成します。

   ```bash
   cp config.sh.sample config.sh
   chmod 600 config.sh
   chmod +x auto_router_fix.sh
   ```

   `config.sh` には、ルーターの管理ページのユーザー名・パスワードが含まれるため、パーミッションは `0600` を推奨します。

3. 実行スクリプトを定期的に動かすようにします（例：`cron`など）。

   ```bash
   ./auto_router_fix.sh
   ```

## 注意事項

- バッファロー製の無線LANルーターと中継器にのみ対応しています。
- ファームウェアのバージョンによっては動作しない場合があります。